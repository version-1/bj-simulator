package strategy

import (
	"github.com/version-1/bj-simulator/internal/card"
	"github.com/version-1/bj-simulator/internal/config"
	"github.com/version-1/bj-simulator/internal/player"
)

type Basic struct{}

func (m Basic) Act(c config.Config, p card.Pile, myself player.Player, players []player.Player, dealer player.Dealer) player.Reason {
	dh := card.Hands(dealer.CurrentRound().Hands)
	mh := card.Hands(myself.CurrentRound().Hands)

	dsum, _, _ := dh.Sum()
	msum, _, _ := mh.Sum()

	if mh.CanSplit() {
		return softHandsWithPair[msum][dsum]
	}

	return softHands[msum][dsum]
}

var softHands = map[int][]player.Reason{
	3: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	4: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	5: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	6: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	7: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	8: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	9: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	10: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	11: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	12: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	13: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	14: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	15: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	16: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	17: {
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
		player.ReasonHit,
	},
	18: {
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
	},
	19: {
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
	},
	20: {
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
	},
	21: {
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
		player.ReasonStand,
	},
}

var softHandsWithPair = map[int][]player.Reason{
	2: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
	4: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
	6: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
	8: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
	10: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
	12: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
	14: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
	16: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
	18: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
	20: {
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
		player.ReasonSplit,
	},
}
